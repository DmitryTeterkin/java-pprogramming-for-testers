(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{198:function(t,i,e){"use strict";e.r(i);e(199),e(200),e(201),e(202),e(203),e(204),e(205),e(206),e(207)},199:function(t,i){Kontur.Module("Kontur.Video.Subscription.Texts",function(){this.webinarNames={Video:"вебинар",VideoGenetive:"вебинара",VideoAccusative:"вебинар",FreeVideo:"бесплатный вебинар",FreeVideoAccusative:"бесплатный вебинар",Started:"начался"},this.conferenceNames={Video:"конференция",VideoGenetive:"конференции",VideoAccusative:"конференцию",FreeVideo:"конференция",FreeVideoAccusative:"конференцию",Started:"началась"}})},200:function(t,i,e){(function(t){Kontur.Module("Kontur.Video.Subscription.ItemManager",function(t,i,e,n){var s,a,o="GetAccess",r="SubscriptionAvailable",c="AlreadySubscribedNeedRequisites",u="AlreadySubscribedNotificationSend",d="AlreadySubscribed",l={isSubscribe:!1,status:""};function f(){p(function(){b(d)})}function p(t){i.handleClick(s.needExtraRequisites,s.extraRequisitesTexts,t)}function b(t){l.status=t||l.status,a.html('<div class="webinar-SubscribeOnNotificationLink-block"><span class="webinar-SubscribeOnNotificationLink-wrap hoverItem"><span class="webinar-SubscribeOnNotificationLink js-SubscribeOnNotificationLink">'+function(){switch(l.status){case d:case u:return'<span class="konturIconic konturIconic-ok direction-color"></span>';default:return""}}()+'<span class="webinar-SubscribeOnNotificationLink-text">'+function(){switch(l.status){case r:return"<span class='link'>Записаться на ".concat(s.videoNames.VideoAccusative,"</span>");case c:return"<span class='link'>Вы записаны. Заполните реквизиты компании</span>";case d:return"Вы записаны. Напомним за час до начала";case u:return"Вы записаны";case o:return"<span class='link'>Подключиться к трансляции</span>";default:return""}}()+"</span></span></span></div>")}this.init=function(i){s=i,l.status=s.status,a=t("#webinarSubscriptionBlock"),s.videoNames=s.isConference?n.conferenceNames:n.webinarNames,s.extraRequisitesTexts=function(){if(s.isConference)return e.default;return l.status===o?e.watchWebinar:e.enrollInWebinar}(),t(document).on("click",".js-SubscribeOnNotificationLink",function(i){i.preventDefault(),function(){switch(l.status){case r:return t.post(s.subscribeUrl,{VideoId:s.videoId},function(){RegisterPageEvent("remind-for-auth")}),b(c),void f();case c:return f();case o:p(function(){b(u),location.reload()})}}()}),b()}},[t,Kontur.School.ExtraRequisites,Kontur.School.ExtraRequisites.Texts,Kontur.Video.Subscription.Texts])}).call(this,e(1))},201:function(t,i,e){(function(t){Kontur.Module("Kontur.Video.Subscription.ListItem",function(t,i,e,n,s){var a="NeedAuth",o="SubscriptionAvailable",r="AlreadySubscribed";this.init=function(c,u){var d,l={isSubscribe:!1,status:""};function f(t){var i;l.status=t||l.status,c.html((i=l.status===r,'<div class="in-line-block pull-right '.concat(i?"disable":"cursor-pointer direction-color",'">')+'<span class="js-SubscribeOnNotificationLink" webinar-subscribeOnNotificationLink style="position: relative; top: 1px;">'+"".concat(function(){switch(l.status){case a:case o:return'<span class="konturIconic konturIconic-notification-bell" style="font-size: 16px;"></span>';case r:return'<span class="konturIconic konturIconic-ok direction-color"></span>';default:return""}}()," ").concat(function(){switch(l.status){case a:case o:return'<span class="subscribeOnNotificationLink-text">Записаться</span> ';case r:return'<span class="subscribeOnNotificationLink-text text-black">Вы записаны</span>';default:return""}}())+"</span></div>"))}d=u,l.status=d.status,d.videoNames=d.isConference?s.conferenceNames:s.webinarNames,d.extraRequisitesTexts=d.isConference?e.default:e.enrollInWebinar,c.on("click",".js-SubscribeOnNotificationLink",function(e){e.preventDefault();var s=t(this);!function(e){switch(l.status){case a:return n.showTooltip(e,{authPrefix:"Для того чтобы записаться на ".concat(d.videoNames.VideoAccusative),returnUrl:d.returnUrl,startUrl:d.startUrl});case o:t.post(d.subscribeUrl,{VideoId:d.videoId},function(){RegisterPageEvent("remind-for-auth")}),f(r),i.handleClick(d.needExtraRequisites,d.extraRequisitesTexts)}}(s)}),f()}},[t,Kontur.School.ExtraRequisites,Kontur.School.ExtraRequisites.Texts,Kontur.AuthorizationRequired,Kontur.Video.Subscription.Texts])}).call(this,e(1))},202:function(t,i,e){(function(t){Kontur.Module("Kontur.Video.Subscription.ListManager",function(t,i){var e;function n(n){n.find(".js-videoSubscriptionInListBlock").each(function(){var n=t(this),s=t.extend({videoId:n.data("video-id"),needExtraRequisites:n.data("need-extra-requisites"),status:n.data("status"),returnUrl:n.data("return-url"),startUrl:n.data("start-url")},e);i.init(n,s)})}this.init=function(i){e=i,n(t(document))},this.bind=function(t){n(t)}},[t,Kontur.Video.Subscription.ListItem])}).call(this,e(1))},203:function(t,i,e){(function(t){Kontur.Module("Kontur.Video.Subscription.Urls",function(t,i){function e(t,e){var n=i.getParameters(t)[e];return decodeURIComponent(n)}function n(t,e,n){return i.addParameter(t,e,encodeURIComponent(n))}this.init=function(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=s.authRedirectUrlPattern,o=s.subscribeParameter,r=s.videoId;t(function(){t("a[href*='".concat(a,"']")).each(function(s,a){var c=t(a),u=c.attr("href"),d=e(u,"targetUrl"),l=e(d,"back"),f=n(d,"back",i.addParameter(l,o,r)),p=n(u,"targetUrl",f);c.attr("href",p)})})}},[t,Kontur.UrlHelper])}).call(this,e(1))},204:function(t,i,e){(function(t){Kontur.Module("Kontur.AllVideoSeminarList",function(t,i){var e={page:2};this.init=function(n){var s=t.extend({},e,n),a=s.container,o=a.find(".js-another-btn"),r=!1;o.removeClass("hide");var c=a.find(".js-video-list-cached-html"),u=a.find(".js-video-list-cached-page"),d=a.find(".js-video-list-cached-has-next-page");c&&c.val()&&(a.find(".js-video-list").append(c.val()),"true"!==d.val()&&o.addClass("hide"),s.page=parseInt(u.val())+1),o.click(function(e){e.preventDefault(),r||(r=!0,t.post(s.allLink,{page:s.page},function(e){c.val(c.val()+e.Html),u.val(s.page),d.val(e.HasNextPage);var n=t(e.Html);i.bind(n),a.find(".js-video-list").append(n),s.page++,e.HasNextPage||o.parent().hide(),o.blur(),r=!1}))})}},[t,Kontur.Video.Subscription.ListManager])}).call(this,e(1))},205:function(t,i,e){(function(t){Kontur.VideoSeminarDescriptionControl=Class.extend({defaultOptions:{wrapperId:""},init:function(i){var e=this.options=t.extend({},this.defaultOptions,i);this.wrapper=t("#"+e.wrapperId),this.toggleLink=this.wrapper.find('[data-bind="toggleLink"]'),this.toggleLinkText=this.wrapper.find('[data-bind="toggleLinkText"]'),this.description=this.wrapper.find('[data-bind="description"]'),this.description.hide(),this.toggleLink.show(),this.__bindEvents()},__bindEvents:function(){var t=this;this.toggleLink.click(function(){t.description.is(":visible")?(t.description.hide(),t.toggleLinkText.text("Читать дальше")):(t.description.show(),t.toggleLinkText.text("Свернуть"))})}})}).call(this,e(1))},206:function(t,i,e){(function(t){window.InitWebinarLiveTimeUpdater=function(t,i){UpdateWebinarTime(t,i);setInterval(function(){t-=3e4,UpdateWebinarTime(t,i)},3e4)},window.UpdateWebinarTime=function(i,e){var n,s=t(".js-webinar-live-elapsed"),a=Math.abs(i),o=Math.floor(a/36e5),r=Math.floor((a-36e5*o)/6e4);if(e||(e={justStarted:"Вебинар только начался",isStartingNow:"Вебинар начнется через 1 мин.",isLiveFor:"Вебинар уже идет",isStartingIn:"Вебинар начнется через"}),0==o&&0==r)n=i<0?e.justStarted:e.isStartingNow;else{n=i<0?e.isLiveFor+" ":e.isStartingIn+" ";var c=r+" "+window.WordEndingByNumber(r,"минуту","минуты","минут");n+=0==o?c:o+" "+WordEndingByNumber(o,"час","часа","часов")+" "+c}s.html(n),e.webinarWatchNowUrl&&UpdateSeeCount(e.webinarWatchNowUrl)},window.UpdateSeeCount=function(i){t.post(i,{},function(i){i&&t(".videoSeminar-inform-text-date").html("Сейчас смотрят "+i.count+" "+WordEndingByNumber(i.count,"человек","человека","человек"))},"json")}}).call(this,e(1))},207:function(t,i,e){(function(t){window.InitVideoSeminarLikeDislike=function(i){t(".js-videoSeminar-like").mousedown(function(){if(t(".js-videoSeminar-like").hasClass("disabled"))return!1}),t(".js-videoSeminar-like").on("click",function(e){var n=t(this),s=t(".js-videoSeminar-like-count");return!n.parent().hasClass("disabled")&&(!!Kontur.AuthorizationRequired.validate(n)&&(t(".js-videoSeminar-like").unbind("click"),t.post(i.likeUrl,{videoSeminarId:i.videoSeminarId},function(){s.stop(!0,!0).animate({top:"-15"},100,function(){s.text(parseInt(s.text())+1).css("top","16px"),s.animate({top:"0"},100,function(){t(".js-videoSeminar-like").addClass("videoSeminar-like_liked disabled").addClass("disabled")})})}),!1))}),t(".js-videoSeminar-report").click(function(){var e=i.reportForm.find('[data-bind="log"]');e.val("User agent: "+window.navigator.userAgent+"\nFlash version: "+getFlashVersion()),window.consoleLogSaver&&e.val(e.val()+"\n"+window.consoleLogSaver.get());var n=[{text:"Отправить",click:function(){closeEvent=!1,i.reportForm.submit()},id:"videoSeminarReportSubmit","data-content-id":"tab-dislike"}];return t("#VideoSeminarReportLightBox").lightbox({buttons:n,create:function(){var e=t("#videoSeminarReportSubmit");t("[href=#tab-technical-problems]").parent().hasClass("active")&&e.hide(),InitPostSimpleFormAsync(i.reportForm,{ajaxOnSubmitCallback:function(){e.addClass("disabled")},successCallback:function(){t("#VideoSeminarReportSuccessLightBox").lightbox(),e.removeClass("disabled")},completeCallback:function(){e.removeClass("disabled")},errorCallback:function(){e.removeClass("disabled")},useDefaultSuccessMessageShowing:!1})},open:function(){PostSimpleFormClearTextInputs(i.reportForm),PostSimpleFormRemoveErrors(i.reportForm)},buttonTemplate:'<span class="btn btn-primary-direction" />'}),t(".lb-closeLink").addClass("lb-button").removeClass("lb-closeLink"),!1})}}).call(this,e(1))}},[[198,0]]]);